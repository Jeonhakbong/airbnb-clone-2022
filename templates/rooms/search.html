{% extends 'base.html' %}

{% block page_name %}
    Search
{% endblock page_name %}

{% block search-bar %}{% endblock search-bar %}

{% block content %}
    <h2>Search Result : {{city}}</h2>

    <form method="get" action="{% url 'rooms:search' %}">
        <div>
            <label for="city">City</label>
            <input id="city" name="city" value="{{city}}" type="text" placeholder="Search by City"/>
        </div>

        <div>
            <label for="country">Country</label>
            <select id="country" name="country">
                {% for country in countries  %}
                    <option value="{{country.code}}"  
                    {% if  country.code == sel_country %}
                        selected
                    {% endif %}>
                        {{country.name}}
                    </option>
                {% endfor %}
            </select>
        </div>
        
        <div>
            <label for="room_type">Room Type</label>
            <select id="room_type" name="room_type">
                <option value="0" 
                {% if room_type.pk == 0 %}
                    selected
                {% endif %}>
                    Any Kind
                </option>
                {% for room_type in room_types  %}
                    <option value="{{room_type.pk}}" 
                    {% if room_type.pk == sel_room_type %}
                        selected
                    {% endif %}>
                        {{room_type.name}}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div>
            <label for="price">Price</label>
            <input id="price" name="price" value="{{price}}" type="number" placeholder="Price"/>
        </div>

        <div>
            <label for="guests">Guests</label>
            <input id="guests" name="guests" value="{{guests}}" type="number" placeholder="Guests"/>
        </div>

        <div>
            <label for="bedrooms">Bedrooms</label>
            <input id="bedrooms" name="bedrooms" value="{{bedrooms}}" type="number" placeholder="Bedrooms"/>
        </div>

        <div>
            <label for="beds">Beds</label>
            <input id="beds" name="beds" value="{{beds}}" type="number" placeholder="Beds"/>
        </div>

        <div>
            <label for="baths">Baths</label>
            <input id="baths" name="baths" value="{{baths}}" type="number" placeholder="Baths"/>
        </div>

        <div>
            <label for="instant">Instant Book Only?</label>
            <input 
                id="instant" 
                name="instant" 
                type="checkbox"  
                {% if instant %}
                    checked
                {% endif %}
                    
            />
        </div>

        <div>
            <label for="superhost">By Superhost Only?</label>
            <input 
                id="superhost" 
                name="superhost" 
                type="checkbox"  
                {% if superhost %}
                    checked
                {% endif %}
                    
            />
        </div>
        

        <div>
            <h3>Amenities</h3>
           <ul>
                {% for amenity in amenities  %}
                    <li>
                        <label for="a_{{amenity.pk}}">{{amenity.name}}</label>
                        <input 
                            id="a_{{amenity.pk}}"
                            name="amenities" 
                            value="{{amenity.pk}}" 
                            type="checkbox" 
                            {% if amenity.pk|slugify in sel_amenities %}
                                checked
                            {% endif %}
                        />
                    </li>
                {% endfor %}
           </ul>
        </div>

        <div>
            <h3>Facilities</h3>
           <ul>
                {% for facility in facilities  %}
                    <li>
                        <label for="f_{{facility.pk}}">{{facility.name}}</label>
                        <input 
                            id="f_{{facility.pk}}"
                            name="facilities" 
                            value="{{facility.pk}}" 
                            type="checkbox" 
                            {% if facility.pk|slugify in sel_facilities %}
                                checked
                            {% endif %}
                        />
                    </li>
                {% endfor %}
           </ul>
        </div>
        
        <button>Search</button>
    </form>

    <h3>Results</h3>
        {% for room in rooms %}
            <h4>{{room.name}}</h4>
        {% endfor %}
            
{% endblock content %}